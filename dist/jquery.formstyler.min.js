/*! @alexanevsky/formstyler v4.0.0 (c) Alexanevsky | https://github.com/alexanevsky/formstyler */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e($||require("jquery")):e(jQuery)}(function(C){"use strict";var o="formstyler",i={idSuffix:"-formstyler",lang:"en",checkbox:{switcher:!1,colored:!1,image:null,icon:null},radio:{colored:!1},number:{spin:!1,colored:!1,plusClass:null,minusClass:null,plusImage:null,minusImage:null,plusIcon:null,minusIcon:null},file:{multipleLimit:3,inputClass:null,browseClass:null,inputImage:null,inputIcon:null,browseImage:null,browseIcon:null},select:{small:!1,smartMinHeight:150,smartPosition:!0,dropdownOffset:20,dropdownSpeed:150,searchLimit:10,searchMinlength:0,searchPause:0,searchClass:null,triggerImage:null,triggerIcon:null,multipleLimit:3,toggleLimit:10,optionImage:null,optionIcon:null},onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}},n={en:{file:{placeholder:"No file selected",browse:"Browse",selectedMultiple:"Selected files: %s"},select:{placeholder:"Select...",searchPlaceholder:"Search",notFound:"Matches not found",selectedMultiple:"Selected %s of %a",selectedAll:"Selected all",toggle:"Toggle all"}},ru:{file:{placeholder:"Файл не выбран",browse:"Выбрать",selectedMultiple:"Выбрано файлов: %s"},select:{placeholder:"Выберите...",searchPlaceholder:"Поиск",notFound:"Совпадений не найдено",selectedMultiple:"Выбрано %s из %a",selectedAll:"Выбрано всё",toggle:"Переключить"}}},I={check:{checkbox:"formstyler-checkbox",checkblock:"formstyler-checkblock",dot:"formstyler-checkbox-dot",image:"formstyler-checkbox-image",icon:"formstyler-checkbox-icon"},switch:{switchbox:"formstyler-switchbox",switchblock:"formstyler-switchblock",dot:"formstyler-switchbox-dot"},radio:{radio:"formstyler-radio",radioblock:"formstyler-radioblock",dot:"formstyler-radio-dot"},number:{number:"formstyler-number",button:"formstyler-number-button",buttonText:"formstyler-number-button-text",buttonImage:"formstyler-number-button-image",buttonIcon:"formstyler-number-button-icon",plus:"formstyler-number-plus",minus:"formstyler-number-minus",image:"formstyler-number-image",icon:"formstyler-number-icon",text:"formstyler-number-text"},file:{file:"formstyler-file",name:"formstyler-file-name",nameValue:"formstyler-file-name-value",nameImage:"formstyler-file-name-image",nameIcon:"formstyler-file-name-icon",button:"formstyler-file-button",buttonBrowse:"formstyler-file-button-browse",buttonImage:"formstyler-file-button-image",buttonIcon:"formstyler-file-button-icon"},select:{select:"formstyler-select",container:"formstyler-select-container",value:"formstyler-select-value",valuePlaceholder:"formstyler-select-placeholder",trigger:"formstyler-select-trigger",triggerImage:"formstyler-select-trigger-image",triggerIcon:"formstyler-select-trigger-icon",triggerHandler:"formstyler-select-trigger-handler",dropdown:"formstyler-select-dropdown",list:"formstyler-select-list",optgroup:"formstyler-select-optgroup",option:"formstyler-select-option",optionPlaceholder:"formstyler-select-placeholder",optionOptgrouped:"formstyler-select-optgrouped",optionImage:"formstyler-select-option-image",optionIcon:"formstyler-select-option-icon",search:"formstyler-select-search",searchInput:"formstyler-select-search-input",notFound:"formstyler-select-notfound",toggle:"formstyler-select-toggle",toggleImage:"formstyler-select-toggle-image",toggleIcon:"formstyler-select-toggle-icon"},label:{label:"formstyler-label"},status:{checked:"formstyler-checked",colored:"formstyler-colored",disabled:"formstyler-disabled",focused:"formstyler-focused",hovered:"formstyler-hovered",iconed:"formstyler-iconed",imaged:"formstyler-imaged",multiple:"formstyler-multiple",noId:"formstyler-noid",opened:"formstyler-opened",selected:"formstyler-selected",small:"formstyler-small",styled:"formstyler-styled"}};function k(e){return e&&(!1!==e&&"false"!==e&&0!==e&&"0"!==e&&"null"!==e)}function a(e,s){var t,l=e.dataset,o={},a={},r="object"==typeof s.locale?s.locale:{};s=s||{},C.each(i,function(e,t){"object"==typeof t&&(a[e]=C.extend({},t,"object"==typeof s[e]?s[e]:{},l))}),t=C.extend({},i,s,l,a),C.each(n[t.lang],function(e,t){o[e]=C.extend({},t,"object"==typeof r[e]?r[e]:{},l)}),this.element=e,this.options=t,this.locale=o,this.init()}a.prototype={init:function(){C(this.element).is(":checkbox")?this._checkbox(this.element):C(this.element).is(":radio")?this._radio(this.element):C(this.element).is('input[type="number"]')?this._number(this.element):C(this.element).is(":file")?this._file(this.element):C(this.element).is("select")&&this._select(this.element)},_checkbox:function(e){function t(){var e,t;t=k(o.checkbox.switcher)?(l.next("label[for="+l.attr("id")+"]").length&&!l.parent().hasClass(I.switch.switchblock)&&(l.next("label[for="+l.attr("id")+"]").addClass(I.label.label).wrap('<div class="'+I.switch.switchblock+'"></div>'),l.prependTo(l.next("."+I.switch.switchblock))),'<div class="'+I.switch.switchbox+'"><div class="'+I.switch.dot+'"></div></div>'):(l.next("label[for="+l.attr("id")+"]").length&&!l.parent().hasClass(I.check.checkblock)&&(l.next("label[for="+l.attr("id")+"]").addClass(I.label.label).wrap('<div class="'+I.check.checkblock+'"></div>'),l.prependTo(l.next("."+I.check.checkblock))),e="",e=o.checkbox.image&&k(o.checkbox.image)?'<img class="'+I.check.image+'" src="'+o.checkbox.image+'" alt="">':o.checkbox.icon&&k(o.checkbox.icon)?'<i class="'+I.check.icon+" "+o.checkbox.icon+'"></i>':'<div class="'+I.check.dot+'"></div>','<div class="'+I.check.checkbox+'">'+e+"</div>");var s=C(t).attr({id:void 0!==l.attr("id")&&""!==l.attr("id")?l.attr("id")+o.idSuffix:null,title:l.attr("title")?l.attr("title"):null}).addClass(l.attr("class")).data(l.data());l.after(s).prependTo(s),l.is(":checked")&&s.addClass(I.status.checked),l.is(":disabled")&&(s.addClass(I.status.disabled),(s.parent().hasClass(I.check.switchblock)||s.parent().hasClass(I.check.checkblock))&&s.parent().addClass(I.status.disabled)),k(o.checkbox.colored)&&s.addClass(I.status.colored),s.click(function(e){e.preventDefault(),l.triggerHandler("click"),s.is("."+I.status.disabled)||(l.is(":checked")?(l.prop("checked",!1),s.removeClass(I.status.checked)):(l.prop("checked",!0),s.addClass(I.status.checked)),l.focus().change())}),l.closest("label").add('label[for="'+l.attr("id")+'"]').on("click.formstyler",function(e){C(e.target).is("a")||C(e.target).closest(s).length||(s.triggerHandler("click"),e.preventDefault())}),l.on("change.formstyler",function(){l.is(":checked")?s.addClass(I.status.checked):s.removeClass(I.status.checked)}).on("keydown.formstyler",function(e){32==e.which&&s.click()}).on("focus.formstyler",function(){s.is("."+I.status.disabled)||s.addClass(I.status.focused)}).on("blur.formstyler",function(){s.removeClass(I.status.focused)}),C('label[for="'+l.attr("id")+'"]').hover(function(){l.is(":disabled")||s.addClass(I.status.hovered)},function(){s.removeClass(I.status.hovered)})}function s(){(l.closest("."+I.check.checkblock).length||l.closest("."+I.switch.switchblock).length)&&(l.closest("label").add('label[for="'+l.attr("id")+'"]').off(".formstyler"),l.off(".formstyler").parent().before(l).remove()),l.closest("."+I.check.checkblock).length&&l.closest("."+I.check.checkblock).children().unwrap(),l.closest("."+I.switch.switchblock).length&&l.closest("."+I.switch.switchblock).children().unwrap()}var l=C("object"==typeof e?e:this.element),o=this.options;t(),l.on("destroy",function(){s()}),l.on("refresh",function(){s(),t()})},_radio:function(e){function t(){l.next("label[for="+l.attr("id")+"]").length&&!l.parent().hasClass(I.radio.radioblock)&&(l.next("label[for="+l.attr("id")+"]").addClass(I.label.label).wrap('<div class="'+I.radio.radioblock+'"></div>'),l.prependTo(l.next("."+I.radio.radioblock)));var s=C('<div class="'+I.radio.radio+'"><div class="'+I.radio.dot+'"></div></div>').attr({id:void 0!==l.attr("id")&&""!==l.attr("id")?l.attr("id")+o.idSuffix:null,title:l.attr("title")?l.attr("title"):null}).addClass(l.attr("class")).data(l.data());l.after(s).prependTo(s),l.is(":checked")&&s.addClass(I.status.checked),l.is(":disabled")&&(s.addClass(I.status.disabled),s.parent().hasClass(I.radio.radioblock)&&s.parent().addClass(I.status.disabled)),k(o.checkbox.colored)&&s.addClass(I.status.colored),C.fn.commonParents=function(){var e=this;return e.first().parents().filter(function(){return C(this).find(e).length===e.length})},C.fn.commonParent=function(){return C(this).commonParents().first()},s.click(function(e){var t;e.preventDefault(),l.triggerHandler("click"),s.is("."+I.status.disabled)||((t=C('input[name="'+l.attr("name")+'"]')).commonParent().find(t).prop("checked",!1).parent().removeClass(I.status.checked),l.prop("checked",!0).parent().addClass(I.status.checked),l.focus().change())}),l.closest("label").add('label[for="'+l.attr("id")+'"]').on("click.formstyler",function(e){C(e.target).is("a")||C(e.target).closest(s).length||(s.triggerHandler("click"),e.preventDefault())}),l.on("change.formstyler",function(){l.parent().addClass(I.status.checked)}).on("focus.formstyler",function(){s.is("."+I.status.disabled)||s.addClass(I.status.focused)}).on("blur.formstyler",function(){s.removeClass(I.status.focused)}),C('label[for="'+l.attr("id")+'"]').hover(function(){l.is(":disabled")||s.addClass(I.status.hovered)},function(){s.removeClass(I.status.hovered)})}function s(){l.closest("."+I.radio.radioblock).length&&(l.closest("label").add('label[for="'+l.attr("id")+'"]').off(".formstyler"),l.off(".formstyler").parent().before(l).remove(),l.closest("."+I.radio.radioblock).children().unwrap())}var l=C("object"==typeof e?e:this.element),o=this.options;t(),l.on("destroy",function(){s()}),l.on("refresh",function(){s(),t()})},_number:function(e){function t(){var e=C('<div class="'+I.number.number+'"></div>').attr({id:void 0!==n.attr("id")&&""!==n.attr("id")?n.attr("id")+o.idSuffix:null,title:n.attr("title")?n.attr("title"):null});function t(e){var t,s=n.val();C.isNumeric(s)||(s=0,n.val("0")),e.is("."+I.number.minus)?t=Number(s)-i:e.is("."+I.number.plus)&&(t=Number(s)+i);var l=(i.toString().split(".")[1]||[]).length;if(0<l){for(var o="1";o.length<=l;)o+="0";t=Math.round(t*o)/o}C.isNumeric(a)&&t<a&&(t=a),C.isNumeric(r)&&r<t&&(t=r),n.val(t)}n.after(e).prependTo(e),e.append('<div class="'+I.number.button+" "+I.number.plus+'"></div>').prepend('<div class="'+I.number.button+" "+I.number.minus+'"></div>'),o.number.plusImage&&k(o.number.plusImage)?C("."+I.number.plus,e).addClass(I.number.buttonImage).html('<img class="'+I.number.image+'" src="'+o.number.plusImage+'" alt="">'):o.number.plusIcon&&k(o.number.plusIcon)?C("."+I.number.plus,e).addClass(I.number.buttonIcon).html('<i class="'+I.number.icon+" "+o.number.plusIcon+'"></i>'):C("."+I.number.plus,e).addClass(I.number.buttonText).html('<span class="'+I.number.text+'">&plus;</span>'),o.number.minusImage&&k(o.number.minusImage)?C("."+I.number.minus,e).addClass(I.number.buttonImage).html('<img class="'+I.number.image+'" src="'+o.number.minusImage+'" alt="">'):o.number.minusIcon&&k(o.number.minusIcon)?C("."+I.number.minus,e).addClass(I.number.buttonIcon).html('<i class="'+I.number.icon+" "+o.number.minusIcon+'"></i>'):C("."+I.number.minus,e).addClass(I.number.buttonText).html('<span class="'+I.number.text+'">&minus;</span>'),o.number.plusClass&&k(o.number.plusClass)?C("."+I.number.plus,e).addClass(o.number.plusClass):C("."+I.number.plus,e).addClass(I.status.styled),o.number.minusClass&&k(o.number.minusClass)?C("."+I.number.minus,e).addClass(o.number.minusClass):C("."+I.number.minus,e).addClass(I.status.styled),k(o.number.colored)&&e.addClass(I.status.colored),n.is(":disabled")&&e.addClass(I.status.disabled);var s,l,a=void 0!==n.attr("min")?Number(n.attr("min")):null,r=void 0!==n.attr("max")?Number(n.attr("max")):null,i=void 0!==n.attr("step")&&C.isNumeric(n.attr("step"))?Number(n.attr("step")):Number(1);n.is(":disabled")||(k(o.number.spin)?(l=s=null,e.on("mousedown","."+I.number.button,function(){var e=C(this);t(e),s=setTimeout(function(){l=setInterval(function(){t(e)},40)},350)}).on("mouseup mouseout","."+I.number.button,function(){clearTimeout(s),clearInterval(l)}).on("mouseup","."+I.number.button,function(){n.change().trigger("input")})):e.on("click","."+I.number.button,function(){t(C(this))})),n.on("focus.formstyler",function(){n.is(":disabled")||e.addClass(I.status.focused)}).on("blur.formstyler",function(){e.removeClass(I.status.focused)}),C('label[for="'+n.attr("id")+'"]').hover(function(){n.is(":disabled")||e.addClass(I.status.hovered)},function(){e.removeClass(I.status.hovered)})}function s(){n.closest("."+I.number.number).length&&n.off(".formstyler").closest("."+I.number.number).before(n).remove()}var n=C("object"==typeof e?e:this.element),o=this.options;t(),n.on("destroy",function(){s()}),n.on("refresh",function(){s(),t()})},_file:function(e){function t(){var l=C('<div class="'+I.file.file+'"><label class="'+I.file.name+'" for="'+a.attr("id")+'"><span class="'+I.file.nameValue+'">'+i.file.placeholder+'</span></label><label class="'+I.file.button+'" for="'+a.attr("id")+'"></label></div>').attr({id:void 0!==a.attr("id")&&""!==a.attr("id")?a.attr("id")+r.idSuffix:null,title:a.attr("title")?a.attr("title"):null}).addClass(a.attr("class")).data(a.data());a.after(l).appendTo(l),a.attr("id")||l.addClass(I.status.noId),r.file.inputClass&&k(r.file.inputClass)?C("."+I.file.name,l).addClass(r.file.inputClass):C("."+I.file.name,l).addClass(I.status.styled),r.file.browseClass&&k(r.file.browseClass)?C("."+I.file.button,l).addClass(r.file.browseClass):C("."+I.file.button,l).addClass(I.status.styled),r.file.browseImage&&k(r.file.browseImage)?C("."+I.file.button,l).addClass(I.status.imaged).prepend('<img class="'+I.file.buttonImage+'" src="'+r.file.browseImage+'" alt="'+i.file.browse+'">'):r.file.browseIcon&&k(r.file.browseIcon)?C("."+I.file.button,l).addClass(I.status.iconed).prepend('<i class="'+I.file.buttonIcon+" "+r.file.browseIcon+'"></i>'):C("."+I.file.button,l).prepend('<span class="'+I.file.buttonBrowse+'">'+i.file.browse+"</span>"),r.file.inputImage&&k(r.file.inputImage)?C("."+I.file.name,l).addClass(I.status.imaged).prepend('<img class="'+I.file.nameImage+'" src="'+r.file.inputImage+'" alt="">'):r.file.inputIcon&&k(r.file.inputIcon)&&C("."+I.file.name,l).addClass(I.status.iconed).prepend('<i class="'+I.file.nameIcon+" "+r.file.inputIcon+'"></i>'),a.is(":disabled")&&l.addClass(I.status.disabled);var o=C("."+I.file.nameValue,l);a.val()&&o.text(a.val().replace(/.+[\\\/]/,"")),a.on("change.formstyler",function(){var e,s,t=a.val();a.is("[multiple]")&&(t="",0<(e=a[0].files).length&&(t=!parseInt(r.file.multipleLimit)&&1!==e.length||e.length>parseInt(r.file.multipleLimit)?i.file.selectedMultiple.replace("%s",e.length):(s=[],C.each(e,function(e,t){s[e]=t.name}),s.join(", ")))),o.text(t.replace(/.+[\\\/]/,"")),""===t?(o.text(i.file.placeholder),l.removeClass(I.status.selected)):l.addClass(I.status.selected)}).on("focus.formstyler",function(){l.addClass(I.status.focused)}).on("blur.formstyler",function(){l.removeClass(I.status.focused)}).on("click.formstyler",function(){l.removeClass(I.status.focused)}),C('label[for="'+a.attr("id")+'"]').hover(function(){a.is(":disabled")||l.addClass(I.status.hovered)},function(){l.removeClass(I.status.hovered)})}function s(){a.closest("."+I.file.file).length&&a.off(".formstyler").parent().before(a).remove()}var a=C("object"==typeof e?e:this.element),r=this.options,i=this.locale;t(),a.on("destroy",function(){s()}),a.on("refresh",function(){s(),t()})},_select:function(e){function f(){if(g.filter(":selected").length){if(g.filter(":selected").length===g.length)return v.select.selectedAll;if(g.filter(":selected").length>parseInt(b.select.multipleLimit))return v.select.selectedMultiple.replace("%s",g.filter(":selected").length).replace("%a",g.length);var s=[];return g.filter(":selected").each(function(e,t){s.push(C(t).text())}),s.join(", ")}return v.select.placeholder}function m(e){(e.hasClass(I.select.opened)||C("."+I.select.dropdown,e).is(":visible"))&&(C("."+I.select.dropdown,e).fadeOut(parseInt(b.select.dropdownSpeed)),e.removeClass(I.status.opened),C("."+I.select.searchInput,e).length&&C("."+I.select.searchInput,e).val("").keyup(),b.onSelectClosed.call(e),1<parseInt(e.css("z-index"))?e.css("z-index",parseInt(e.css("z-index"))-1):e.css("z-index","auto"))}function h(e){!C(e.target).parents().hasClass(I.select.select)&&"OPTION"!=e.target.nodeName&&C("."+I.select.select+"."+I.status.opened).length&&C("."+I.select.select+"."+I.status.opened).each(function(e,t){m(C(t))})}function t(){var d=C('<div class="'+I.select.select+'"><div class="'+I.select.container+'"><div class="'+I.select.value+'"></div><div class="'+I.select.trigger+'"></div></div><div class="'+I.select.dropdown+'"><ul class="'+I.select.list+'"></ul></div></div>').attr({id:void 0!==p.attr("id")&&""!==p.attr("id")?p.attr("id")+b.idSuffix:null,title:p.attr("title")?p.attr("title"):null}).addClass(p.attr("class")).data(p.data());p.after(d).prependTo(d),C("."+I.select.list,d).html(function(){for(var e="",t=0;t<C("option",p).length;t++){var s=C("option",p).eq(t),l="",o="",a=[],r=[],i=s.data();for(var n in a.push(I.select.option),s.prop("selected")&&a.push(I.status.selected),s.is(":disabled")&&a.push(I.status.disabled),s.is(":first-child")&&""===s.val()&&a.push(I.select.optionPlaceholder),void 0!==s.attr("class")&&a.push(s.attr("class")),void 0!==s.attr("id")&&""!==s.attr("id")&&(r.push('id="'+s.attr("id")+b.idSuffix+'"'),r.push('data-id="'+s.attr("id")+'"')),void 0!==s.attr("title")&&""!==s.attr("title")&&r.push('title="'+s.attr("title")+'"'),i)""!==i[n]&&r.push("data-"+n+'="'+i[n]+'"');s.parent().is("optgroup")&&(a.push(I.select.optionOptgrouped),r.push('data-optgroup="'+s.parent().index()+'"'),s.is(":first-child")&&(o='<li data-index="'+s.parent().index()+'" class="'+I.select.optgroup+'">'+s.parent().attr("label")+"</label>")),r.unshift('class="'+a.join(" ")+'"'),l=s.data("html")?"<li "+r.join(" ")+' data-text="'+s.text()+'">'+s.data("html")+"</li>":"<li "+r.join(" ")+">"+s.text()+"</li>",""!=o&&(l=o+l),e+=l}return e}()),p.is("[multiple]")&&k(b.select.toggleLimit)&&g.length>=parseInt(b.select.toggleLimit)&&C("."+I.select.dropdown,d).prepend('<div class="'+I.select.toggle+'">'+v.select.toggle+"</div>"),b.select.searchLimit&&k(b.select.searchLimit)&&g.length>=parseInt(b.select.searchLimit)&&(C("."+I.select.dropdown,d).prepend('<div class="'+I.select.search+'"><input name="text" class="'+I.select.searchInput+'" placeholder="'+v.select.searchPlaceholder+'" autocomplete="off"></div><div class="'+I.select.notFound+'">'+v.select.notFound+"</div>"),b.select.searchClass&&k(b.select.searchClass)?C("."+I.select.searchInput,d).addClass(b.select.searchClass):C("."+I.select.searchInput,d).addClass(I.status.styled));var e,t,s=C("."+I.select.container,d),l=C("."+I.select.value,s),o=C("."+I.select.trigger,s),u=C("."+I.select.dropdown,d),a=C("."+I.select.list,u),r=C("li",a),i=C("."+I.select.toggle,u),n=C("."+I.select.searchInput,u),c=C("."+I.select.notFound,u);if(p.is("[multiple]")&&(r.addClass(I.status.multiple),b.select.optionImage&&k(b.select.optionImage)?(r.prepend('<img class="'+I.select.optionImage+'" src="'+b.select.optionImage+'">'),i.prepend('<img class="'+I.select.toggleImage+'" src="'+b.select.optionImage+'">')):b.select.optionIcon&&k(b.select.optionIcon)?(r.prepend('<i class="'+I.select.optionIcon+" "+b.select.optionIcon+'"></i>'),i.prepend('<i class="'+I.select.toggleIcon+" "+b.select.optionIcon+'"></i>')):(r.addClass(I.status.styled),i.addClass(I.status.styled))),b.select.triggerImage&&k(b.select.triggerImage)?o.html('<img class="'+I.select.triggerImage+'" src="'+b.select.triggerImage+'">'):b.select.triggerIcon&&k(b.select.triggerIcon)?o.html('<i class="'+I.select.triggerIcon+" "+b.select.triggerIcon+'"></i>'):o.html('<span class="'+I.select.triggerHandler+'"></span>'),p.is("[multiple]")?(l.text(f()),g.filter(":selected").length?l.removeClass(I.select.valuePlaceholder):l.addClass(I.select.valuePlaceholder)):!g.filter(":selected").length||g.first().is(":selected")&&""===g.first().val()&&""===g.first().text()?l.text(v.select.placeholder).addClass(I.select.valuePlaceholder):(l.text(g.filter(":selected").text()),""===g.filter(":selected").val()?l.addClass(I.select.valuePlaceholder):l.removeClass(I.select.valuePlaceholder)),""===g.first().text()&&""===g.first().val()&&r.first().hide(),b.select.small&&k(b.select.small)&&d.addClass(I.status.small),p.is(":disabled"))return d.addClass(I.status.disabled),0;s.click(function(){var e,t,s,l,o,a,r,i,n,c;u.is(":visible")||d.hasClass(I.status.opened)?m(d):(C("."+I.select.select).filter("."+I.status.opened).length&&C("."+I.select.select).filter("."+I.status.opened).each(function(e,t){m(C(t))}),p.focus(),y||(e=d,a=C("."+I.select.dropdown,e),r=C("."+I.select.list,e),i=C("li",r),n=parseInt(e.offset().top)-parseInt(C(window).scrollTop()),c=parseInt(C(window).height())-parseInt(C("."+I.select.container,e).outerHeight())-n,b.select.smartPosition&&k(b.select.smartPosition)&&c<n&&c<parseInt(b.select.smartMinHeight)+parseInt(b.select.dropdownOffset)?a.css({top:"auto",bottom:parseInt(b.select.dropdownOffset)+parseInt(C("."+I.select.container,e).outerHeight()),"max-height":Math.floor(n-1.5*parseInt(b.select.dropdownOffset)),height:"auto"}):a.css({bottom:"auto",top:parseInt(b.select.dropdownOffset)+parseInt(C("."+I.select.container,e).outerHeight()),"max-height":Math.floor(c-1.5*parseInt(b.select.dropdownOffset)),height:"auto"}),a.fadeIn(parseInt(b.select.dropdownSpeed)),e.addClass(I.status.opened).addClass(I.status.focused),b.onSelectOpened.call(e),"auto"===e.css("z-index")?e.css("z-index",1):e.css("z-index",parseInt(e.css("z-index"))+1),e.offset().left+a.outerWidth()>C(window).width()&&a.css({left:"auto",right:"0",width:"auto"}),i.filter("."+I.status.selected).length&&(""===C("select",e).val()?a.scrollTop(0):a.innerHeight()/i.last().outerHeight()%2!=0?a.scrollTop(a.scrollTop()+i.filter("."+I.status.selected).position().top-a.innerHeight()/2+i.last().outerHeight()/2):a.scrollTop(a.scrollTop()+i.filter("."+I.status.selected).position().top-a.innerHeight()/2+i.last().outerHeight())),s=(t=e).prop("scrollHeight")-t.outerHeight(),o=l=null,t.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(e){l=e.originalEvent.detail<0||0<e.originalEvent.wheelDelta?1:-1,o=t.scrollTop(),(s<=o&&l<0||o<=0&&0<l)&&(e.stopPropagation(),e.preventDefault())})))}),r.filter(":not(."+I.status.disabled+"):not(."+I.select.optgroup+")").click(function(){var e;p.focus(),!p.is("[multiple]")&&C(this).is("."+I.status.selected)||(e=C(this).index(),e-=C(this).prevAll("."+I.select.optgroup).length,p.is("[multiple]")?C(this).is("."+I.status.selected)?g.eq(e).prop("selected",!1):g.eq(e).prop("selected",!0):(C(this).addClass(I.status.selected).siblings().removeClass(I.status.selected),g.prop("selected",!1).eq(e).prop("selected",!0),m(d)),p.change())}),i.click(function(){g.filter(":selected").length!==g.length&&p.is("[multiple]")?g.prop("selected",!0):g.prop("selected",!1),p.change()}),n.length&&(n.val("").keyup(),c.hide(),t=function(){var e=n.val();""===e?(r.show(),i.show()):(e.length>=parseInt(b.select.searchMinlength)&&r.each(function(){C(this).is(":first-child")&&C(this).hasClass(I.select.optionPlaceholder)||!C(this).hasClass(I.select.option)||!C(this).html().match(new RegExp(".*?"+e+".*?","i"))?C(this).hide():C(this).show(),C(this).is(":visible")&&void 0!==C(this).data("optgroup")&&C(this).parent().find("."+I.select.optgroup+"[data-index="+C(this).data("optgroup")+"]").show()}),i.hide()),""===r.first().text()&&r.first().hide(),r.length&&u.is(":visible")&&r.filter(":visible").length<1?c.show():c.hide()},n.on("keyup",function(){clearTimeout(e),e=setTimeout(t,parseInt(b.select.searchPause))}).on("keydown",function(){clearTimeout(e)})),p.on("change.formstyler",function(){p.is("[multiple]")?(l.text(f()),g.filter(":selected").length?l.removeClass(I.select.valuePlaceholder):l.addClass(I.select.valuePlaceholder),g.filter(":selected").length===g.length?(i.addClass(I.status.selected),r.not("."+I.select.optgroup).addClass(I.status.selected)):(i.removeClass(I.status.selected),g.each(function(e,t){C(t).is(":selected")?r.not("."+I.select.optgroup).eq(e).addClass(I.status.selected):r.not("."+I.select.optgroup).eq(e).removeClass(I.status.selected)}))):(g.filter(":selected").length?l.text(g.filter(":selected").text()):l.text(v.select.placeholder),g.filter(":selected").length&&""!==g.filter(":selected").val()?l.removeClass(I.select.valuePlaceholder):l.addClass(I.select.valuePlaceholder),r.removeClass(I.status.selected).not("."+I.select.optgroup).eq(p[0].selectedIndex).addClass(I.status.selected))}).on("focus.formstyler",function(){d.addClass(I.status.focused),C(I.select.container).not(d).each(function(e,t){m(C(t))})}).on("blur.formstyler",function(){d.removeClass(I.status.focused)}).on("keydown.formstyler keyup.formstyler",function(e){p.is("[multiple]")?g.filter(":selected").length===g.length?r.not("."+I.select.optgroup).addClass(I.status.selected):g.each(function(e,t){C(t).is(":selected")?r.not("."+I.select.optgroup).eq(e).addClass(I.status.selected):r.not("."+I.select.optgroup).eq(e).removeClass(I.status.selected)}):r.removeClass(I.status.selected).not("."+I.select.optgroup).eq(p[0].selectedIndex).addClass(I.status.selected),38==e.which||37==e.which||33==e.which||36==e.which?""===p.val()?u.scrollTop(0):u.scrollTop(u.scrollTop()+r.filter("."+I.status.selected).position().top):40==e.which||39==e.which||34==e.which||35==e.which?u.scrollTop(u.scrollTop()+r.filter("."+I.status.selected).position().top-u.innerHeight()+r.last().outerHeight()):13==e.which&&(e.preventDefault(),m(d))}).on("keydown.formstyler",function(e){32==e.which&&(e.preventDefault(),s.click())}),h.registered||(C(document).on("click",h),h.registered=!0),C('label[for="'+p.attr("id")+'"]').hover(function(){p.is(":disabled")||d.addClass(I.status.hovered)},function(){d.removeClass(I.status.hovered)})}function s(){p.closest("."+I.select.select).length&&p.off(".formstyler").parent().before(p).remove()}var p=C("object"==typeof e?e:this.element),g=C("option",p),b=this.options,v=this.locale,y=!(!navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||navigator.userAgent.match(/(Windows\sPhone)/i));navigator.userAgent.match(/Android/i)&&navigator.userAgent.match(/(Windows\sPhone)/i);h.registered=!1,t(),p.on("destroy",function(){s()}),p.on("refresh",function(){s(),t()})}},C.fn[o]=function(t){var s,l=arguments;return void 0===t||"object"==typeof t?(this.each(function(){C.data(this,"_"+o)||C.data(this,"_"+o,new a(this,t))}).promise().done(function(){}),this):"string"==typeof t&&"_"!==t[0]&&"init"!==t?(this.each(function(){var e=C.data(this,"_"+o);e instanceof a&&"function"==typeof e[t]&&(s=e[t].apply(e,Array.prototype.slice.call(l,1)))}),void 0!==s?s:this):void 0}});